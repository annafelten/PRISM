shiny::runApp('Desktop/School24-25/InternshipApps2025/Pertussis/PRISM')
models <- readRDS("artefacts/wa_pertussis_models.Rds")
> models <- readRDS("artefacts/wa_pertussis_models.Rds")
models <- readRDS("artefacts/wa_pertussis_models.Rds")
models <- readRDS("/Users/anna/Desktop/School24-25/InternshipApps2025/Pertussis/PRISM/artefacts/wa_pertussis_models.Rds")
names(models)
models$accuracy_table
models$cor_table
models$df_train %>% colnames()
head(models$df_train)
head(models$df_test)
df_full <- models$df_full
saveRDS(list(
df_full          = lagged,
df_train         = train,
df_test          = test,
fc_arimax        = fc_arimax,
fc_base          = fc_base,
fit_arima_base   = fit_arima_base,
arimax_fit       = fit_arimax,
gls_fit          = gls_fit,
accuracy_table   = accuracy_table,
year_rmse_table  = year_rmse_table,
cor_table        = cor_table,
pretty_terms     = pretty_terms,
lead_time_days   = lead_days
), "artefacts/wa_pertussis_models_final.Rds")
message("\n✔ artefacts/wa_pertussis_models_final.Rds written")
saveRDS(list(
df_full          = lagged,
df_train         = train,
df_test          = test,
fc_arimax        = fc_arimax,
fc_base          = fc_base,
fit_arima_base   = fit_arima_base,
arimax_fit       = fit_arimax,
gls_fit          = gls_fit,
accuracy_table   = accuracy_table,
year_rmse_table  = year_rmse_table,
cor_table        = cor_table,
pretty_terms     = pretty_terms,
lead_time_days   = lead_days
), "artefacts/wa_pertussis_models_final.Rds")
message("\n✔ artefacts/wa_pertussis_models_final.Rds written")
saveRDS(vaccine_trends, "data/vaccine_trends.rds")
readr::write_csv(accuracy_table, "artefacts/accuracy_table_spokane.csv")
shiny::runApp('Desktop/School24-25/InternshipApps2025/Pertussis/PRISM')
# ③ add mean weekly cases & normalised RMSE -------------------------------
year_means <- readr::read_csv(
"wa_doh_formatted_pertussis_case_data.csv", show_col_types = FALSE,
col_types = cols(date = col_date(), cases = col_double())
) %>%
mutate(year = lubridate::year(date)) %>%
group_by(year) %>%
summarise(mean_cases = mean(cases), .groups = "drop")
# ③ add mean weekly cases & normalised RMSE -------------------------------
year_means <- readr::read_csv(
"wa_doh_formatted_pertussis_case_data.csv", show_col_types = FALSE,
col_types = cols(date = col_date(), cases = col_double())
) %>%
mutate(year = lubridate::year(date)) %>%
group_by(year) %>%
summarise(mean_cases = mean(cases), .groups = "drop")
shiny::runApp()
runApp()
